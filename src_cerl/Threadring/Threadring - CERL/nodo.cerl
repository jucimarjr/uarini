-class(nodo).
-constructor([new/2, new/3]).
-export([new/2, new/3, roundtrip/2]).

new(Id, Pid) ->
	spawn(?CLASS, roundtrip, [Id, Pid]).

new(Id, Pid, self) ->
	roundtrip(Id, Pid).

roundtrip(Id, Pid) ->
	receive
		1 ->
			io:fwrite("fim: ~b ~p 1 ~n", [Id, Pid]),
	        erlang:halt();
      Token ->
			io:fwrite("~b ~p ~p ~n", [Id, Pid, Token-1]),
			Pid ! Token - 1,
			roundtrip(Id, Pid)
	end.
